--- decode_init_OLD.c	2021-12-06 23:24:27.555450800 +0800
+++ decode_init_NEW.c	2021-12-06 23:24:27.555450800 +0800
@@ -2,6 +2,13 @@
 {
     JvContext *s = avctx->priv_data;
 
+    if (!avctx->width || !avctx->height ||
+        (avctx->width & 7) || (avctx->height & 7)) {
+        av_log(avctx, AV_LOG_ERROR, "Invalid video dimensions: %dx%d\n",
+               avctx->width, avctx->height);
+        return AVERROR(EINVAL);
+    }
+
     s->frame = av_frame_alloc();
     if (!s->frame)
         return AVERROR(ENOMEM);
