--- qemu_input_event_send_key_delay_OLD.c	2021-12-07 00:00:47.385297400 +0800
+++ qemu_input_event_send_key_delay_NEW.c	2021-12-07 00:00:47.386319400 +0800
@@ -4,6 +4,8 @@
         kbd_timer = timer_new_ms(QEMU_CLOCK_VIRTUAL, qemu_input_queue_process,
                                  &kbd_queue);
     }
-    qemu_input_queue_delay(&kbd_queue, kbd_timer,
-                           delay_ms ? delay_ms : kbd_default_delay_ms);
+    if (queue_count < queue_limit) {
+        qemu_input_queue_delay(&kbd_queue, kbd_timer,
+                               delay_ms ? delay_ms : kbd_default_delay_ms);
+    }
 }
