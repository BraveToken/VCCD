--- ff_vmafmotion_init_OLD.c	2021-12-06 23:21:32.504638700 +0800
+++ ff_vmafmotion_init_NEW.c	2021-12-06 23:21:32.504638700 +0800
@@ -5,6 +5,9 @@
     int i;
     const AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(fmt);
 
+    if (w < 3 || h < 3)
+        return AVERROR(EINVAL);
+
     s->width = w;
     s->height = h;
     s->stride = FFALIGN(w * sizeof(uint16_t), 32);
