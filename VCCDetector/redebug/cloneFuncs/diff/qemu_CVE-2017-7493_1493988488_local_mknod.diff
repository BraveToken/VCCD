--- local_mknod_OLD.c	2021-12-07 00:00:43.478769300 +0800
+++ local_mknod_NEW.c	2021-12-07 00:00:43.478769300 +0800
@@ -4,6 +4,12 @@
     int err = -1;
     int dirfd;
 
+    if (fs_ctx->export_flags & V9FS_SM_MAPPED_FILE &&
+        local_is_mapped_file_metadata(fs_ctx, name)) {
+        errno = EINVAL;
+        return -1;
+    }
+
     dirfd = local_opendir_nofollow(fs_ctx, dir_path->data);
     if (dirfd == -1) {
         return -1;
