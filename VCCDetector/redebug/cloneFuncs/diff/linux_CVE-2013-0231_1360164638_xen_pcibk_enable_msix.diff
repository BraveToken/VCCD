--- xen_pcibk_enable_msix_OLD.c	2021-12-06 23:32:05.174505600 +0800
+++ xen_pcibk_enable_msix_NEW.c	2021-12-06 23:32:05.174505600 +0800
@@ -35,10 +35,10 @@
 						pci_name(dev), i,
 						op->msix_entries[i].vector);
 		}
-	} else {
-		printk(KERN_WARNING DRV_NAME ": %s: failed to enable MSI-X: err %d!\n",
-			pci_name(dev), result);
-	}
+	} else
+		pr_warn_ratelimited(DRV_NAME ": %s: error enabling MSI-X for guest %u: err %d!\n",
+				    pci_name(dev), pdev->xdev->otherend_id,
+				    result);
 	kfree(entries);
 
 	op->value = result;
