--- hid_debug_events_open_OLD.c	2021-12-06 23:45:01.987873000 +0800
+++ hid_debug_events_open_NEW.c	2021-12-06 23:45:01.987873000 +0800
@@ -9,8 +9,8 @@
 		goto out;
 	}
 
-	if (!(list->hid_debug_buf = kzalloc(HID_DEBUG_BUFSIZE, GFP_KERNEL))) {
-		err = -ENOMEM;
+	err = kfifo_alloc(&list->hid_debug_fifo, HID_DEBUG_FIFOSIZE, GFP_KERNEL);
+	if (err) {
 		kfree(list);
 		goto out;
 	}
