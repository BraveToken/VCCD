--- codec_get_buffer_OLD.c	2021-12-06 23:17:42.513743600 +0800
+++ codec_get_buffer_NEW.c	2021-12-06 23:17:42.514740900 +0800
@@ -4,6 +4,9 @@
     FrameBuffer *buf;
     int ret, i;
 
+    if(av_image_check_size(s->width, s->height, 0, s))
+        return -1;
+
     if (!ist->buffer_pool && (ret = alloc_buffer(s, ist, &ist->buffer_pool)) < 0)
         return ret;
 
