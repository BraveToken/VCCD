--- vga_draw_text_OLD.c	2021-12-06 23:59:05.081943500 +0800
+++ vga_draw_text_NEW.c	2021-12-06 23:59:05.082942600 +0800
@@ -12,7 +12,7 @@
     int64_t now = qemu_clock_get_ms(QEMU_CLOCK_VIRTUAL);
 
     /* compute font data address (in plane 2) */
-    v = s->sr[VGA_SEQ_CHARACTER_MAP];
+    v = sr(s, VGA_SEQ_CHARACTER_MAP);
     offset = (((v >> 4) & 1) | ((v << 1) & 6)) * 8192 * 4 + 2;
     if (offset != s->font_offsets[0]) {
         s->font_offsets[0] = offset;
