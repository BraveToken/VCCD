static void filter_edges_16bit(void *dst1, void *prev1, void *cur1, void *next1,
                               int w, int prefs, int mrefs, int parity, int mode)
{
    uint16_t *dst  = dst1;
    uint16_t *prev = prev1;
    uint16_t *cur  = cur1;
    uint16_t *next = next1;
    int x;
    uint16_t *prev2 = parity ? prev : cur ;
    uint16_t *next2 = parity ? cur  : next;

    const int edge = MAX_ALIGN / 2 - 1;
    int offset = FFMAX(w - edge, 3);

    mrefs /= 2;
    prefs /= 2;

    FILTER(0,  FFMIN(3, w), 0)

    dst   = (uint16_t*)dst1  + offset;
    prev  = (uint16_t*)prev1 + offset;
    cur   = (uint16_t*)cur1  + offset;
    next  = (uint16_t*)next1 + offset;
    prev2 = (uint16_t*)(parity ? prev : cur);
    next2 = (uint16_t*)(parity ? cur  : next);

    FILTER(offset, w - 3, 1)
    offset = FFMAX(offset, w - 3);
    FILTER(offset, w, 0)
}
