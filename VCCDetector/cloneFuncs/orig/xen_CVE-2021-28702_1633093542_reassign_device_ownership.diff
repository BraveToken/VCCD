--- reassign_device_ownership_OLD.c	2021-12-07 00:18:51.806938200 +0800
+++ reassign_device_ownership_NEW.c	2021-12-07 00:18:51.806938200 +0800
@@ -36,7 +36,7 @@
                 ret = iommu_identity_mapping(source, p2m_access_x,
                                              rmrr->base_address,
                                              rmrr->end_address, 0);
-                if ( ret != -ENOENT )
+                if ( ret && ret != -ENOENT )
                     return ret;
             }
     }
