--- cirrus_mem_writeb_mode4and5_16bpp_OLD.c	2021-12-06 23:54:52.012798300 +0800
+++ cirrus_mem_writeb_mode4and5_16bpp_NEW.c	2021-12-06 23:54:52.013794200 +0800
@@ -7,7 +7,7 @@
     unsigned val = mem_value;
     uint8_t *dst;
 
-    dst = s->vram_ptr + offset;
+    dst = s->vram_ptr + (offset &= s->cirrus_addr_mask);
     for (x = 0; x < 8; x++) {
 	if (val & 0x80) {
 	    *dst = s->cirrus_shadow_gr1;
