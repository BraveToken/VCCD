--- hid_debug_events_poll_OLD.c	2021-12-06 23:45:02.086608800 +0800
+++ hid_debug_events_poll_NEW.c	2021-12-06 23:45:02.086608800 +0800
@@ -3,7 +3,7 @@
 	struct hid_debug_list *list = file->private_data;
 
 	poll_wait(file, &list->hdev->debug_wait, wait);
-	if (list->head != list->tail)
+	if (!kfifo_is_empty(&list->hid_debug_fifo))
 		return EPOLLIN | EPOLLRDNORM;
 	if (!list->hdev->debug)
 		return EPOLLERR | EPOLLHUP;
