--- start_xmit_OLD.c	2021-12-07 00:02:12.646288000 +0800
+++ start_xmit_NEW.c	2021-12-07 00:02:12.646288000 +0800
@@ -11,6 +11,11 @@
         return;
     }
 
+    if (s->tx.busy) {
+        return;
+    }
+    s->tx.busy = true;
+
     while (s->mac_reg[TDH] != s->mac_reg[TDT]) {
         base = tx_desc_base(s) +
                sizeof(struct e1000_tx_desc) * s->mac_reg[TDH];
@@ -37,5 +42,6 @@
             break;
         }
     }
+    s->tx.busy = false;
     set_ics(s, 0, cause);
 }
