--- put_page_from_l3e_OLD.c	2021-12-07 00:10:22.602825800 +0800
+++ put_page_from_l3e_NEW.c	2021-12-07 00:10:22.602825800 +0800
@@ -18,7 +18,16 @@
     }
 
     if ( unlikely(partial > 0) )
+    {
+        ASSERT(preemptible >= 0);
         return __put_page_type(l3e_get_page(l3e), preemptible);
+    }
+
+    if ( preemptible < 0 )
+    {
+        current->arch.old_guest_table = l3e_get_page(l3e);
+        return 0;
+    }
 
     return put_page_and_type_preemptible(l3e_get_page(l3e), preemptible);
 }
