--- handle_buffered_iopage_OLD.c	2021-12-06 23:59:29.714060500 +0800
+++ handle_buffered_iopage_NEW.c	2021-12-06 23:59:29.714060500 +0800
@@ -33,11 +33,13 @@
         req.df = 1;
         req.type = buf_req->type;
         req.data_is_ptr = 0;
+        xen_rmb();
         qw = (req.size == 8);
         if (qw) {
             buf_req = &buf_page->buf_ioreq[(rdptr + 1) %
                                            IOREQ_BUFFER_SLOT_NUM];
             req.data |= ((uint64_t)buf_req->data) << 32;
+            xen_rmb();
         }
 
         handle_ioreq(state, &req);
