--- complete_emulated_mmio_OLD.c	2021-12-06 23:34:25.014491200 +0800
+++ complete_emulated_mmio_NEW.c	2021-12-06 23:34:25.014491200 +0800
@@ -23,7 +23,7 @@
 		frag->len -= len;
 	}
 
-	if (vcpu->mmio_cur_fragment == vcpu->mmio_nr_fragments) {
+	if (vcpu->mmio_cur_fragment >= vcpu->mmio_nr_fragments) {
 		vcpu->mmio_needed = 0;
 
 		/* FIXME: return into emulator if single-stepping.  */
