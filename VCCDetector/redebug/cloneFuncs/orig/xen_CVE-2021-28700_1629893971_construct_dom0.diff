--- construct_dom0_OLD.c	2021-12-07 00:18:40.128168500 +0800
+++ construct_dom0_NEW.c	2021-12-07 00:18:40.129166800 +0800
@@ -20,7 +20,7 @@
 
     iommu_hwdom_init(d);
 
-    d->max_pages = ~0U;
+    d->max_pages = dom0_mem >> PAGE_SHIFT;
 
     kinfo.unassigned_mem = dom0_mem;
     kinfo.d = d;
