--- proc_sys_readdir_OLD.c	2021-12-06 23:38:12.635697500 +0800
+++ proc_sys_readdir_NEW.c	2021-12-06 23:38:12.635697500 +0800
@@ -12,7 +12,7 @@
 	ctl_dir = container_of(head, struct ctl_dir, header);
 
 	if (!dir_emit_dots(file, ctx))
-		return 0;
+		goto out;
 
 	pos = 2;
 
@@ -22,6 +22,7 @@
 			break;
 		}
 	}
+out:
 	sysctl_head_finish(head);
 	return 0;
 }
