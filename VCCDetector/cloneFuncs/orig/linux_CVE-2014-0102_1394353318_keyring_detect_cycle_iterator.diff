--- keyring_detect_cycle_iterator_OLD.c	2021-12-06 23:34:38.966176400 +0800
+++ keyring_detect_cycle_iterator_NEW.c	2021-12-06 23:34:38.966176400 +0800
@@ -6,7 +6,11 @@
 
 	kenter("{%d}", key->serial);
 
-	BUG_ON(key != ctx->match_data);
+	/* We might get a keyring with matching index-key that is nonetheless a
+	 * different keyring. */
+	if (key != ctx->match_data)
+		return 0;
+
 	ctx->result = ERR_PTR(-EDEADLK);
 	return 1;
 }
