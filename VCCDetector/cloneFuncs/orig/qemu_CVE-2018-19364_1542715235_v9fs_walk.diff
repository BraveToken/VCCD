--- v9fs_walk_OLD.c	2021-12-07 00:01:11.181674900 +0800
+++ v9fs_walk_NEW.c	2021-12-07 00:01:11.181674900 +0800
@@ -85,7 +85,9 @@
             err = -EINVAL;
             goto out;
         }
+        v9fs_path_write_lock(s);
         v9fs_path_copy(&fidp->path, &path);
+        v9fs_path_unlock(s);
     } else {
         newfidp = alloc_fid(s, newfid);
         if (newfidp == NULL) {
