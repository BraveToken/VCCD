--- vbe_ioport_write_data_OLD.c	2021-12-06 23:59:00.979924600 +0800
+++ vbe_ioport_write_data_NEW.c	2021-12-06 23:59:00.981924900 +0800
@@ -26,11 +26,7 @@
             vbe_fixup_regs(s);
             break;
         case VBE_DISPI_INDEX_BANK:
-            if (s->vbe_regs[VBE_DISPI_INDEX_BPP] == 4) {
-              val &= (s->vbe_bank_mask >> 2);
-            } else {
-              val &= s->vbe_bank_mask;
-            }
+            val &= s->vbe_bank_mask;
             s->vbe_regs[s->vbe_index] = val;
             s->bank_offset = (val << 16);
             vga_update_memory_access(s);
