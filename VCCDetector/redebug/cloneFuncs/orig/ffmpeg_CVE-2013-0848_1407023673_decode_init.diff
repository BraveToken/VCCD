--- decode_init_OLD.c	2021-12-06 23:19:56.605159500 +0800
+++ decode_init_NEW.c	2021-12-06 23:19:56.605159500 +0800
@@ -89,6 +89,13 @@
         return AVERROR_INVALIDDATA;
     }
 
+    if (s->predictor == MEDIAN && avctx->pix_fmt == AV_PIX_FMT_YUV422P &&
+        avctx->width % 4) {
+        av_log(avctx, AV_LOG_ERROR, "width must be multiple of 4 "
+               "for this combination of colorspace and predictor type.\n");
+        return AVERROR_INVALIDDATA;
+    }
+
     if ((ret = ff_huffyuv_alloc_temp(s)) < 0)
         return ret;
 
