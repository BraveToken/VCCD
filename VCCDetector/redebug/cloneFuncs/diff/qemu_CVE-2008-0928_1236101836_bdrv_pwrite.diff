--- bdrv_pwrite_OLD.c	2021-12-06 23:54:59.665334200 +0800
+++ bdrv_pwrite_NEW.c	2021-12-06 23:54:59.665334200 +0800
@@ -5,6 +5,9 @@
 
     if (!drv)
         return -ENOMEDIUM;
+    if (bdrv_check_byte_request(bs, offset, count1))
+        return -EIO;
+
     if (!drv->bdrv_pwrite)
         return bdrv_pwrite_em(bs, offset, buf1, count1);
     return drv->bdrv_pwrite(bs, offset, buf1, count1);
