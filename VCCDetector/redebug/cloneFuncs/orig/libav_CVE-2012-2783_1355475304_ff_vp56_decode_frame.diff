--- ff_vp56_decode_frame_OLD.c	2021-12-06 23:22:50.847105600 +0800
+++ ff_vp56_decode_frame_NEW.c	2021-12-06 23:22:50.847105600 +0800
@@ -25,8 +25,14 @@
         s->modelp = &s->models[is_alpha];
 
         res = s->parse_header(s, buf, remaining_buf_size, &golden_frame);
-        if (res < 0)
+        if (res < 0) {
+            int i;
+            for (i = 0; i < 4; i++) {
+                if (s->frames[i].data[0])
+                    avctx->release_buffer(avctx, &s->frames[i]);
+            }
             return res;
+        }
 
         if (res == VP56_SIZE_CHANGE) {
             int i;
