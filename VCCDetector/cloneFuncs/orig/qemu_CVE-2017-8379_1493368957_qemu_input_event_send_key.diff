--- qemu_input_event_send_key_OLD.c	2021-12-07 00:00:47.337431800 +0800
+++ qemu_input_event_send_key_NEW.c	2021-12-07 00:00:47.338452700 +0800
@@ -6,7 +6,7 @@
         qemu_input_event_send(src, evt);
         qemu_input_event_sync();
         qapi_free_InputEvent(evt);
-    } else {
+    } else if (queue_count < queue_limit) {
         qemu_input_queue_event(&kbd_queue, src, evt);
         qemu_input_queue_sync(&kbd_queue);
     }
